"use strict";(globalThis.webpackChunkx_currency=globalThis.webpackChunkx_currency||[]).push([[431],{1647:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(1609),c=r(1455),a=r.n(c),o=r(104),i=r(3517),u=r(7823),l=r(204);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e,t,r=(e=(0,n.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=r[0],s=r[1],y=x_currency.has_optincraft;return React.createElement(React.Fragment,null,"0"===y&&React.createElement(i.A,{message:(0,o.__)("Enable Currency Selection Popup","x-currency"),description:React.createElement(React.Fragment,null,(0,o.__)("Display a welcome popup allowing visitors to choose their preferred currency when they first arrive at your site. Click the Setup button to configure and activate this feature.","x-currency")),type:"warning",showIcon:!0,action:React.createElement(u.Ay,{size:"middle",type:"primary",style:{flexShrink:0},onClick:function(){s(!0),a()({path:"/x-currency/admin/setup-optincraft",method:"POST"}).then(function(e){l.Ay.success((0,o.__)("Popup setup successfully.","x-currency")),x_currency.has_optincraft="1"}).finally(function(){s(!1)})},loading:c},(0,o.__)("Setup","x-currency")),style:{margin:"auto",marginBottom:20,maxWidth:"1400px"}}))}},1916:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(104);const c=function(e){var t=e.label,r=e.isProAvailable;return React.createElement("span",null,t,!r&&React.createElement("span",{style:{marginLeft:8,background:"#faad14",color:"#fff",borderRadius:4,padding:"2px 6px",fontSize:12,fontWeight:500}},(0,n.__)("PRO","x-currency")))}},7431:(e,t,r)=>{r.r(t),r.d(t,{default:()=>yt});var n,c,a,o,i=r(8684),u=r(6427),l=r(104),f=r(4809),s=r(9491),y=r(7143),m=r(6087),p=r(2619),d=r(923),b=r(7823),v=r(3069),g=r(4299),h=r(7333),_=r(3160),E=r(7396);function x(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R=(0,E.A)(u.Flex)(n||(n=x(["\n\tgap: 12px;\n\n\t.flag img {\n\t\twidth: 45px;\n\t\tborder-radius: 5px;\n\t}\n\n\t.information {\n\t\t.top {\n\t\t\tdisplay: flex;\n\t\t\tgap: 6px;\n\t\t\tmargin-bottom: 4px;\n\n\t\t\t.name {\n\t\t\t\tcolor: var( --Dark-01, #252525 );\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\tfont-family: Inter;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tline-height: 22px;\n\t\t\t}\n\t\t}\n\n\t\t.bottom {\n\t\t\tdisplay: block;\n\t\t\tcolor: var( --Dark-03, #656565 );\n\t\t\tfont-family: Inter;\n\t\t\tfont-size: 14px;\n\t\t\tfont-style: normal;\n\t\t\tfont-weight: 400;\n\t\t\tline-height: 20px;\n\t\t}\n\t}\n"]))),A=(0,E.A)(h.A)(c||(c=x(["\n\tmax-width: 1400px;\n\tmargin: auto !important;\n"]))),w=(0,E.A)(_.A)(a||(a=x(["\n\tpadding-top: 32px;\n\t.ant-drawer-body {\n\t\tposition: relative;\n\t}\n\t.ant-drawer-footer {\n\t\tpadding-top: 16px;\n\t\tpadding-bottom: 16px;\n\t}\n"]))),O=E.A.div(o||(o=x(["\n\twidth: 100%;\n\tbackground: #fafafa;\n\tpadding: 24px;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n"]))),S=r(3607),j=r(117),C=r(5571),P=r(515),k=r(1455),F=r.n(k),I=r(902),T=r(6565),N=r(1916);function G(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return U(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(U(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,U(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,U(s,"constructor",l),U(l,"constructor",u),u.displayName="GeneratorFunction",U(l,c,"GeneratorFunction"),U(s),U(s,c,"Generator"),U(s,n,function(){return this}),U(s,"toString",function(){return"[object Generator]"}),(G=function(){return{w:a,m:y}})()}function U(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}U=function(e,t,r,n){function a(t,r){U(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},U(e,t,r,n)}function D(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var M=Array.from({length:13},function(e,t){return{value:t,label:t}});const z=function(e){var t=e.form,r=e.initialValues,n=e.disabled,c=e.isBaseCurrency,a=void 0!==c&&c,o=e.values,i=e.setValues,f=e.openDrawer,s=e.flagUrl,y=e.setFlagUrl,p=B((0,m.useState)([]),2),d=p[0],v=p[1],g=B((0,m.useState)(!0),2),h=g[0],_=g[1],E=(0,T.$)();(0,m.useEffect)(function(){var e=function(){var e,t=(e=G().m(function e(){var t,r;return G().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,F()({path:"x-currency/admin/payment-gateways"});case 1:t=e.v,v(t.data),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Failed to fetch payment gateways:",r);case 3:return e.p=3,_(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){D(a,n,c,o,i,"next",e)}function i(e){D(a,n,c,o,i,"throw",e)}o(void 0)})});return function(){return t.apply(this,arguments)}}();e()},[]),(0,m.useEffect)(function(){A(),i({})},[f]);var x=a||n,R=(0,m.useRef)(null),A=function(){y(!1),t.setFieldsValue({flag:!1})},w=x_currency.countries_code[o.code],O=o.rounding||(null==r?void 0:r.rounding);return React.createElement(S.A,{form:t,name:"validateOnly",layout:"vertical",autoComplete:"off",size:"large",initialValues:r,disabled:n,onValuesChange:function(e,t){i(t)}},React.createElement(S.A.Item,{name:"name",label:(0,l.__)("Name","x-currency"),rules:[{required:!0}]},React.createElement(j.A,null)),React.createElement(S.A.Item,{name:"flag",hidden:!0},React.createElement(j.A,null)),React.createElement(S.A.Item,{name:"media",label:(0,l.__)("Flag","x-currency")},React.createElement(u.Flex,null,React.createElement(u.FlexItem,null,React.createElement(C.A,{src:s||"".concat(x_currency.asset_url,"/images/flags/").concat(w,".png")})),React.createElement(u.FlexBlock,null,React.createElement(b.Ay,{onClick:function(){R.current||(R.current=wp.media({title:(0,l.__)("Select or Upload Media","x-currency"),button:{text:(0,l.__)("Use this media","x-currency")},multiple:!1}),R.current.on("select",function(){var e=R.current.state().get("selection").first().toJSON();t.setFieldsValue({flag:e.id}),y(e.url)})),R.current.open()},icon:React.createElement(I.A,null),size:"middle"},w?(0,l.__)("Replace","x-currency"):(0,l.__)("Upload","x-currency")),s&&React.createElement(b.Ay,{style:{marginLeft:10},onClick:A,size:"middle"},(0,l.__)("Reset","x-currency"))))),React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"code",label:(0,l.__)("Code","x-currency"),rules:[{required:!0}]},React.createElement(j.A,{disabled:x}))),React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"symbol",label:(0,l.__)("Symbol","x-currency"),rules:[{required:!0}]},React.createElement(j.A,null)))),React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"rate",label:(0,l.__)("Rate","x-currency"),rules:[{required:!0}]},React.createElement(j.A,{disabled:x}))),React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"rate_type",label:(0,l.__)("Rate Type","x-currency"),rules:[{required:!0}]},React.createElement(P.A,{disabled:x},React.createElement(P.A.Option,{value:"fixed"},(0,l.__)("Fixed","x-currency")),React.createElement(P.A.Option,{value:"auto"},(0,l.__)("Auto Update","x-currency")))))),React.createElement(S.A.Item,{name:"symbol_position",label:(0,l.__)("Symbol Position","x-currency"),rules:[{required:!0}]},React.createElement(P.A,null,React.createElement(P.A.Option,{value:"left"},(0,l.__)("Left","x-currency")),React.createElement(P.A.Option,{value:"right"},(0,l.__)("Right","x-currency")),React.createElement(P.A.Option,{value:"left_space"},(0,l.__)("Left with space","x-currency")),React.createElement(P.A.Option,{value:"right_space"},(0,l.__)("Right with space","x-currency")))),React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"extra_fee",label:(0,l.__)("Extra Fee","x-currency"),rules:[{required:!0}]},React.createElement(j.A,{disabled:x}))),React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"extra_fee_type",label:(0,l.__)("Extra Fee Type","x-currency"),rules:[{required:!0}]},React.createElement(P.A,{disabled:x},React.createElement(P.A.Option,{value:"fixed"},(0,l.__)("Fixed","x-currency")),React.createElement(P.A.Option,{value:"percent"},(0,l.__)("Percent","x-currency")))))),React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"thousand_separator",label:(0,l.__)("Thousand Separator","x-currency"),rules:[{required:!0}]},React.createElement(j.A,null))),React.createElement(u.FlexBlock,null,React.createElement(S.A.Item,{name:"decimal_separator",label:(0,l.__)("Decimal Separator","x-currency"),rules:[{required:!0}]},React.createElement(j.A,null)))),React.createElement(S.A.Item,{name:"max_decimal",label:(0,l.__)("Maximum Decimal","x-currency"),rules:[{required:!0}]},React.createElement(P.A,{options:M})),React.createElement(S.A.Item,{name:"rounding",label:(0,l.__)("Rounding","x-currency"),rules:[{required:!0}]},React.createElement(P.A,null,React.createElement(P.A.Option,{value:"disabled"},(0,l.__)("Disabled","x-currency")),React.createElement(P.A.Option,{value:"up"},(0,l.__)("Up","x-currency")),React.createElement(P.A.Option,{value:"down"},(0,l.__)("Down","x-currency")),React.createElement(P.A.Option,{value:"nearest"},(0,l.__)("Nearest","x-currency")))),O&&"disabled"!==O&&React.createElement(S.A.Item,{name:"subtract_amount",label:React.createElement(N.A,{label:(0,l.__)("Subtract price after rounding","x-currency"),isProAvailable:E}),disabled:!E},React.createElement(j.A,{disabled:!E})),React.createElement(S.A.Item,{label:(0,l.__)("Disable Payment Gateways for This Currency","x-currency"),name:"disable_payment_gateways"},React.createElement(P.A,{mode:"multiple",placeholder:(0,l.__)("Select payment gateways","x-currency"),loading:h,options:d})))};var V=r(204),q=r(8723),$=r(6020),H=r(3146);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){X(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function X(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=e.lists,r=e.onClick,n=function(e){var n=e.index,c=e.style,a=t[n];return React.createElement("div",{onClick:function(){return r(a)},style:W(W({},c),{},{display:"flex",alignItems:"center",padding:"16px",cursor:"pointer",backgroundColor:"#fff",transition:"background-color 0.3s"}),onMouseEnter:function(e){return e.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:function(e){return e.currentTarget.style.backgroundColor="#fff"}},React.createElement(C.A,{src:"".concat(x_currency.asset_url,"/images/flags/").concat(x_currency.countries_code[a.code],".png")}),React.createElement("div",{style:{marginLeft:"16px"}},React.createElement("div",{style:{marginBottom:"8px"}},React.createElement("span",{dangerouslySetInnerHTML:{__html:a.name}}),React.createElement(q.A,{style:{marginLeft:"8px"}},a.code)),React.createElement("div",null,(0,l.__)("Symbol:","x-currency")," ",React.createElement(q.A,{color:"blue"},React.createElement("span",{dangerouslySetInnerHTML:{__html:a.symbol}})),(0,l.__)("Rate:","x-currency")," ",React.createElement(q.A,{color:"blue"},a.rate))))};return React.createElement(H.Ay,null,function(e){var r=e.height,c=e.width;return React.createElement($.Y1,{height:r,itemCount:t.length,itemSize:80,width:c},n)})}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ee(){var e=Q((0,m.useState)(!1),2),t=e[0],r=e[1],n=Q((0,m.useState)(""),2),c=n[0],a=n[1],o=(0,y.useSelect)(function(e){return e(d.A.CURRENCIES).getPreMadeList()},[]),i=(0,m.useCallback)(function(e){return r(e)},[]);(0,m.useEffect)(function(){var e="x-currency-show-currency-auto-filler";return(0,p.addAction)(e,"x-currency",i),function(){return(0,p.removeAction)(e,"x-currency",i)}},[i]);var u=(0,m.useMemo)(function(){return o.filter(function(e){return e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase())})},[o,c]);return React.createElement(w,{open:t,onClose:function(){return r(!1)},title:(0,l.__)("Premade Currencies","x-currency"),width:450},React.createElement(O,null,React.createElement(j.A.Search,{placeholder:(0,l.__)("Search by Currency Name or Code...","x-currency"),size:"large",value:c,onChange:function(e){return a(e.target.value)},style:{color:"#333"}})),React.createElement("div",{style:{paddingTop:"70px",height:"100%"}},React.createElement(J,{lists:u,onClick:function(e){(0,p.doAction)("x-currency-update-currency-create-form-values",e),r(!1),a("")}})))}function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return ne(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(ne(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ne(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,ne(s,"constructor",l),ne(l,"constructor",u),u.displayName="GeneratorFunction",ne(l,c,"GeneratorFunction"),ne(s),ne(s,c,"Generator"),ne(s,n,function(){return this}),ne(s,"toString",function(){return"[object Generator]"}),(re=function(){return{w:a,m:y}})()}function ne(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}ne=function(e,t,r,n){function a(t,r){ne(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},ne(e,t,r,n)}function ce(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach(function(t){ie(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ie(e,t,r){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value};const se=function(){var e=ue((0,m.useState)(!1),2),t=e[0],r=e[1],n=ue((0,m.useState)({}),2),c=n[0],a=n[1],o=ue((0,m.useState)(!1),2),i=o[0],u=o[1],f=ue(S.A.useForm(),1)[0],s=ue((0,m.useState)(!1),2),v=s[0],h=s[1],_=function(){r(!1),f.resetFields()},E=(0,m.useCallback)(function(e){var t=oe(oe({},e),{},{name:fe(e.name),symbol:fe(e.symbol)});f.setFieldsValue(t),a(t)},[f]);(0,m.useEffect)(function(){return(0,p.addAction)("x-currency-show-currency-drawer","x-currency",r),(0,p.addAction)("x-currency-update-currency-create-form-values","x-currency",E),function(){(0,p.removeAction)("x-currency-show-currency-drawer","x-currency",r),(0,p.removeAction)("x-currency-update-currency-create-form-values","x-currency",E)}},[E]);var x=function(){var e,t=(e=re().m(function e(){var t,r,n,c;return re().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=(0,y.dispatch)(d.A.CURRENCIES),r=t.createNewCurrency,u(!0),e.p=1,e.n=2,f.validateFields();case 2:return e.n=3,r(f.getFieldsValue());case 3:n=e.v,V.Ay.success(n.message),_(),e.n=5;break;case 4:e.p=4,c=e.v,V.Ay.error(c.message),console.error("Submission failed:",c);case 5:return e.p=5,u(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){ce(a,n,c,o,i,"next",e)}function i(e){ce(a,n,c,o,i,"throw",e)}o(void 0)})});return function(){return t.apply(this,arguments)}}();return React.createElement(w,{title:(0,l.__)("New Currency","x-currency"),placement:"right",width:500,onClose:_,open:t,extra:React.createElement(b.Ay,{onClick:function(){(0,p.doAction)("x-currency-show-currency-auto-filler",!0)},icon:React.createElement(g.A,null),type:"default"},(0,l.__)("Auto Fill","x-currency")),footer:React.createElement(b.Ay,{type:"primary",size:"large",onClick:x,loading:i},(0,l.__)("Create New Currency","x-currency"))},React.createElement(z,{values:c,setValues:a,form:f,initialValues:{rounding:"disabled",disable_payment_gateways:[]},openDrawer:t,disabled:i,flagUrl:v,setFlagUrl:h}),React.createElement(ee,null))};var ye=r(8163);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(t){be(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function be(e,t,r){return(t=function(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return ge(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(ge(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ge(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,ge(s,"constructor",l),ge(l,"constructor",u),u.displayName="GeneratorFunction",ge(l,c,"GeneratorFunction"),ge(s),ge(s,c,"Generator"),ge(s,n,function(){return this}),ge(s,"toString",function(){return"[object Generator]"}),(ve=function(){return{w:a,m:y}})()}function ge(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}ge=function(e,t,r,n){function a(t,r){ge(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},ge(e,t,r,n)}function he(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}function _e(e){return function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){he(a,n,c,o,i,"next",e)}function i(e){he(a,n,c,o,i,"throw",e)}o(void 0)})}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Re=function(){var e=Ee((0,m.useState)({}),2),t=e[0],r=e[1],n=Ee((0,m.useState)(!1),2),c=n[0],a=n[1],o=Ee((0,m.useState)(!1),2),i=o[0],u=o[1],f=Ee((0,m.useState)(!1),2),s=f[0],v=f[1],g=Ee(S.A.useForm(),1)[0],h=Ee((0,m.useState)(null),2),_=h[0],E=h[1],x=Ee((0,m.useState)(!1),2),R=x[0],A=x[1],O=(0,y.dispatch)(d.A.CURRENCIES),j=function(){a(!1),E(null),g.resetFields()},C=function(e,t){a(e),E(t)};(0,m.useEffect)(function(){var e=function(){var e=_e(ve().m(function e(){var t,n,c;return ve().w(function(e){for(;;)switch(e.p=e.n){case 0:return u(!0),e.p=1,e.n=2,F()({path:"x-currency/admin/currencies/".concat(_)});case 2:t=e.v,n=t.currency,r(n),A(n.flag_url.length>0&&n.flag_url),g.setFieldsValue(n),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Error fetching currency:",c),V.Ay.error((0,l.__)("Failed to load currency details","x-currency"));case 4:return e.p=4,u(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();_&&e()},[_,g]),(0,m.useEffect)(function(){var e="x-currency-show-currency-update-drawer";return(0,p.addAction)(e,"x-currency",C),function(){return(0,p.removeAction)(e,"x-currency",C)}},[]);var P=function(){var e=_e(ve().m(function e(){var t,r,n;return ve().w(function(e){for(;;)switch(e.p=e.n){case 0:return v(!0),e.p=1,e.n=2,g.validateFields();case 2:return t=de(de({},g.getFieldsValue()),{},{id:_}),e.n=3,O.updateCurrencyById(t);case 3:r=e.v,V.Ay.success(r.message),j(),e.n=5;break;case 4:e.p=4,n=e.v,V.Ay.error(n.message),console.error("Submission failed:",n);case 5:return e.p=5,v(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),k=x_currency.base_currency_id===_;return React.createElement(w,{title:React.createElement(React.Fragment,null,(0,l.__)("Update Currency","x-currency")," ",k&&React.createElement(q.A,{bordered:!1,color:"green"},(0,l.__)("Base Currency","x-currency"))),placement:"right",width:500,onClose:j,open:c,footer:React.createElement(b.Ay,{type:"primary",size:"large",onClick:P,loading:s},(0,l.__)("Update Currency","x-currency"))},React.createElement(ye.A,{spinning:i,tip:(0,l.__)("Loading...","x-currency")},React.createElement(z,{values:t,setValues:r,form:g,initialValues:{rounding:"disabled",disable_payment_gateways:[]},openDrawer:c,disabled:s,isBaseCurrency:k,flagUrl:R,setFlagUrl:A})))};var Ae=r(9977);function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Oe(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return Se(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(Se(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Se(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,Se(s,"constructor",l),Se(l,"constructor",u),u.displayName="GeneratorFunction",Se(l,c,"GeneratorFunction"),Se(s),Se(s,c,"Generator"),Se(s,n,function(){return this}),Se(s,"toString",function(){return"[object Generator]"}),(Oe=function(){return{w:a,m:y}})()}function Se(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}Se=function(e,t,r,n){function a(t,r){Se(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Se(e,t,r,n)}function je(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}function Ce(e){return function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){je(a,n,c,o,i,"next",e)}function i(e){je(a,n,c,o,i,"throw",e)}o(void 0)})}}var Pe=function(){var e=Ce(Oe().m(function e(t){var r,n,c,a;return Oe().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=(0,y.dispatch)(d.A.CURRENCIES),n=r.exchangeCurrencyRate,e.p=1,e.n=2,n(t);case 2:c=e.v,V.Ay.success(c.message),e.n=4;break;case 3:e.p=3,a=e.v,V.Ay.error(a.message),(0,y.dispatch)(d.A.CURRENCIES).setIsExchangingCurrencyRate(t,!1);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(_x){return e.apply(this,arguments)}}();function ke(){var e,t,r,n=(t=(0,m.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,c,a,o,i=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){l=!0,c=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw c}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=n[0],a=n[1],o=(0,(0,y.select)(d.A.CURRENCIES).getCurrencies)().find(function(e){return e.id===x_currency.base_currency_id}),i=function(){var e=Ce(Oe().m(function e(){var t,r,n,c;return Oe().w(function(e){for(;;)switch(e.p=e.n){case 0:return a(!0),t=(0,y.dispatch)(d.A.CURRENCIES),r=t.exchangeAllCurrenciesRate,e.p=1,e.n=2,r();case 2:n=e.v,V.Ay.success(n.message),e.n=4;break;case 3:e.p=3,c=e.v,V.Ay.error(c.message),(0,y.dispatch)(d.A.CURRENCIES).setIsExchangingCurrencyRate(0,!1);case 4:a(!1);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,(0,l.sprintf)((0,l.__)("Rate (1 %s = ?)","x-currency"),null!==(e=null==o?void 0:o.code)&&void 0!==e?e:"")),React.createElement(u.FlexItem,null,React.createElement(b.Ay,{icon:React.createElement(Ae.A,{spin:c}),disabled:c,onClick:i})))}var Fe=r(4058);function Ie(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return Te(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(Te(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Te(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,Te(s,"constructor",l),Te(l,"constructor",u),u.displayName="GeneratorFunction",Te(l,c,"GeneratorFunction"),Te(s),Te(s,c,"Generator"),Te(s,n,function(){return this}),Te(s,"toString",function(){return"[object Generator]"}),(Ie=function(){return{w:a,m:y}})()}function Te(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}Te=function(e,t,r,n){function a(t,r){Te(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Te(e,t,r,n)}function Ne(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}var Ge=function(){var e,t=(e=Ie().m(function e(t,r){var n,c,a,o;return Ie().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=(0,y.dispatch)(d.A.CURRENCIES),c=n.switchCurrencyStatusById,e.p=1,e.n=2,c(t,r);case 2:a=e.v,V.Ay.success(a.message),e.n=4;break;case 3:e.p=3,o=e.v,V.Ay.error(o.message);case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){Ne(a,n,c,o,i,"next",e)}function i(e){Ne(a,n,c,o,i,"throw",e)}o(void 0)})});return function(_x,e){return t.apply(this,arguments)}}(),Ue=r(4214),De=r(6632),Be=r(2759);function Le(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(r,n,c,a){var u=n&&n.prototype instanceof i?n:i,l=Object.create(u.prototype);return Me(l,"_invoke",function(r,n,c){var a,i,u,l=0,f=c||[],s=!1,y={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,i=0,u=e,y.n=r,o}};function m(r,n){for(i=r,u=n,t=0;!s&&l&&!c&&t<f.length;t++){var c,a=f[t],m=y.p,p=a[2];r>3?(c=p===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=r<2&&m<a[1])?(i=0,y.v=n,y.n=a[1]):m<p&&(c=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,y.n=p,i=0))}if(c||r>1)return o;throw s=!0,n}return function(c,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),i=f,u=p;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(y.n=-1),m(i,u)):y.n=u:y.v=u);try{if(l=2,a){if(i||(c="next"),t=a[c]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+c+"' method"),i=1);a=e}else if((t=(s=y.n<0)?u:r.call(n,y))!==o)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(r,c,a),!0),l}var o={};function i(){}function u(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(Me(t={},n,function(){return this}),t),s=l.prototype=i.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Me(e,c,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,Me(s,"constructor",l),Me(l,"constructor",u),u.displayName="GeneratorFunction",Me(l,c,"GeneratorFunction"),Me(s),Me(s,c,"Generator"),Me(s,n,function(){return this}),Me(s,"toString",function(){return"[object Generator]"}),(Le=function(){return{w:a,m:y}})()}function Me(e,t,r,n){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}Me=function(e,t,r,n){function a(t,r){Me(e,t,function(e){return this._invoke(t,r,e)})}t?c?c(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Me(e,t,r,n)}function ze(e,t,r,n,c,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}var Ve=function(){var e,t=(e=Le().m(function e(t){var r,n,c,a;return Le().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=(0,y.dispatch)(d.A.CURRENCIES),n=r.deleteSingleCurrency,e.p=1,e.n=2,n(t);case 2:c=e.v,V.Ay.success(c.message),e.n=4;break;case 3:e.p=3,a=e.v,V.Ay.error(a.message);case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,r=arguments;return new Promise(function(n,c){var a=e.apply(t,r);function o(e){ze(a,n,c,o,i,"next",e)}function i(e){ze(a,n,c,o,i,"throw",e)}o(void 0)})});return function(_x){return t.apply(this,arguments)}}();const qe=[{title:(0,l.__)("Name","x-currency"),dataIndex:"name",key:"name",render:function(e,t){var r=x_currency.base_currency_id===t.id;return React.createElement(R,null,React.createElement(u.FlexItem,{className:"flag"},React.createElement("img",{src:t.flag_url.length>0?t.flag_url:"".concat(x_currency.asset_url,"/images/flags/").concat(x_currency.countries_code[t.code],".png"),alt:(0,l.sprintf)((0,l.__)("Flag of %s","x-currency"),e)})),React.createElement(u.FlexBlock,{className:"information"},React.createElement("span",{className:"top"},React.createElement("span",{className:"name"},e),React.createElement(q.A,{bordered:!1,color:"processing"},t.code),r&&React.createElement(q.A,{bordered:!1,color:"green"},(0,l.__)("Base Currency","x-currency"))),React.createElement("span",{className:"bottom"},t.updated_at?(0,l.sprintf)((0,l.__)("Last updated at - %s","x-currency"),t.updated_at):"")))}},{title:function(){return React.createElement(ke,null)},dataIndex:"rate",key:"rate",align:"right",render:function(e,t){var r=x_currency.base_currency_id===t.id;return React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,(0,l.sprintf)((0,T.X)(t.symbol_position),t.symbol,e)),React.createElement(u.FlexItem,null,React.createElement(b.Ay,{icon:React.createElement(Ae.A,{spin:!r&&t.isUpdatingRate}),disabled:r||t.isUpdatingRate,onClick:function(){return Pe(t.id)}})))}},{title:(0,l.__)("Extra Fee","x-currency"),dataIndex:"extra_fee",key:"extra_fee",align:"right",render:function(e,t){return React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,(0,l.sprintf)((0,T.X)(t.symbol_position),t.symbol,e)),React.createElement(u.FlexItem,null,React.createElement(q.A,{bordered:!1,color:"gold",style:{textTransform:"capitalize"}},t.extra_fee_type)))}},{title:(0,l.__)("Rounding","x-currency"),dataIndex:"rounding",key:"rounding",align:"right",render:function(e){return React.createElement("span",{style:{textTransform:"capitalize"}},e)}},{title:(0,l.__)("Status","x-currency"),dataIndex:"active",key:"active",align:"right",render:function(e,t){var r=x_currency.base_currency_id===t.id;return React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,(0,l.__)("Active","x-currency")),React.createElement(u.FlexItem,null,React.createElement(Fe.A,{checked:e,disabled:r,loading:t.isUpdatingStatus,onClick:function(){return Ge(t.id,e)}})))}},{title:(0,l.__)("Action","x-currency"),dataIndex:"id",key:"action",align:"right",render:function(e){var t=x_currency.base_currency_id===e;return React.createElement(u.Flex,null,React.createElement(u.FlexBlock,null,React.createElement(b.Ay,{icon:React.createElement(De.A,null),onClick:function(){return function(e){(0,p.doAction)("x-currency-show-currency-update-drawer",!0,e)}(e)}},(0,l.__)("Edit","x-currency"))),React.createElement(u.FlexItem,null,React.createElement(Ue.A,{placement:"bottomRight",title:(0,l.__)("Are you sure to delete this currency?","x-currency"),okText:(0,l.__)("Yes","x-currency"),cancelText:(0,l.__)("No","x-currency"),onConfirm:function(){return Ve(e)},disabled:t},React.createElement(b.Ay,{type:"primary",icon:React.createElement(Be.A,null),disabled:t,danger:!0}))))}}];var $e=r(9774),He=r(526),Ye=r(76),Ke=r(4360),We=r(1272);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach(function(t){Ze(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ze(e,t,r){return(t=function(e){var t=function(e){if("object"!=Xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},et.apply(null,arguments)}var tt=(0,m.createContext)({}),rt=function(){var e=(0,m.useContext)(tt),t=e.setActivatorNodeRef,r=e.listeners;return React.createElement(b.Ay,et({type:"text",size:"small",icon:React.createElement($e.A,null),style:{cursor:"move"},ref:t},r))},nt=function(e){var t=(0,Ke.gl)({id:e["data-row-key"]}),r=t.attributes,n=t.listeners,c=t.setNodeRef,a=t.setActivatorNodeRef,o=t.transform,i=t.transition,u=t.isDragging,l=Qe(Qe({},e.style),{},{transform:We.Ks.Translate.toString(o),transition:i},u?{position:"relative",zIndex:9999}:{}),f=(0,m.useMemo)(function(){return{setActivatorNodeRef:a,listeners:n}},[a,n]);return React.createElement(tt.Provider,{value:f},React.createElement("tr",et({},e,{ref:c,style:l},r)))};function ct(e){var t=e.children,r=e.currencies,n=e.sortCurrencies,c=(0,m.useCallback)(function(e){var t=e.active,c=e.over;if(c&&t.id!==c.id){var a=r.findIndex(function(e){return e.id===t.id}),o=r.findIndex(function(e){return e.id===c.id}),i=(0,Ke.be)(r,a,o);n(i)}},[r,n]);return React.createElement(He.Mp,{modifiers:[Ye.FN],onDragEnd:c},React.createElement(Ke.gB,{items:r.map(function(e){return e.id}),strategy:Ke._G},t))}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ot=function(){(0,p.doAction)("x-currency-show-currency-drawer",!0)},it=(0,y.withSelect)(function(e){var t=e(d.A.CURRENCIES),r=t.getCurrencies,n=t.isLoading;return{currencies:r(),isLoading:n()}}),ut=(0,y.withDispatch)(function(e){return{sortCurrencies:e(d.A.CURRENCIES).sortCurrencies}}),lt=(0,s.compose)([it,ut])(function(e){var t,r=e.currencies,n=e.isLoading,c=e.sortCurrencies,a=(0,T.$)();return React.createElement(A,{title:(0,l.__)("Currencies","x-currency"),extra:React.createElement(u.Flex,null,!a&&React.createElement(m.Fragment,null,React.createElement(u.FlexItem,null,(0,l.sprintf)((0,l.__)("You have used %d/3 free currency","x-currency"),r.length)),React.createElement(u.FlexItem,null,React.createElement(b.Ay,{variant:"outlined",color:"primary",href:"https://crafium.com/x-currency",target:"_blank"},(0,l.__)("Upgrade","x-currency")))),React.createElement(u.FlexBlock,null,React.createElement(b.Ay,{type:"primary",icon:React.createElement(g.A,null),onClick:ot,disabled:!a&&r.length>=3||0===r.length},(0,l.__)("Add New Currency","x-currency"))))},React.createElement(ct,{currencies:r,sortCurrencies:c},React.createElement(v.A,{rowKey:"id",components:{body:{row:nt}},dataSource:r,columns:[{key:"sort",align:"center",render:function(){return React.createElement(rt,null)}}].concat((t=qe,function(e){if(Array.isArray(e))return at(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),currencies:r,loading:n,pagination:!1})),React.createElement(se,null),React.createElement(Re,null))});const ft=(0,m.memo)(lt);var st=r(1647);function yt(){return React.createElement(i.A,{key:"currencies"},React.createElement(u.Fill,{name:f.A.PRIMARY_HEADER_NAME},(0,l.__)("Currencies","x-currency")),React.createElement(st.A,null),React.createElement(ft,null))}}}]);